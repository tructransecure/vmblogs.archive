/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20140128 */
(function(e){"use strict";e.fn.cycle.transitions.tileSlide=e.fn.cycle.transitions.tileBlind={before:function(i,t,n,s){i.API.stackSlides(t,n,s),e(t).css({display:"block",visibility:"visible"}),i.container.css("overflow","hidden"),i.tileDelay=i.tileDelay||"tileSlide"==i.fx?100:125,i.tileCount=i.tileCount||7,i.tileVertical=i.tileVertical!==!1,i.container.data("cycleTileInitialized")||(i.container.on("cycle-destroyed",e.proxy(this.onDestroy,i.API)),i.container.data("cycleTileInitialized",!0))},transition:function(i,t,n,s,o){function l(e){p.eq(e).animate(I,{duration:i.speed,easing:i.easing,complete:function(){(s?y-1===e:0===e)&&i._tileAniCallback()}}),setTimeout(function(){(s?y-1!==e:0!==e)&&l(s?e+1:e-1)},i.tileDelay)}i.slides.not(t).not(n).css("visibility","hidden");var r,c,a,d,u,p=e(),f=e(t),v=e(n),y=i.tileCount,g=i.tileVertical,h=i.container.height(),m=i.container.width();g?(c=Math.floor(m/y),d=m-c*(y-1),a=u=h):(c=d=m,a=Math.floor(h/y),u=h-a*(y-1)),i.container.find(".cycle-tiles-container").remove();var I,A={left:0,top:0,overflow:"hidden",position:"absolute",margin:0,padding:0};I=g?"tileSlide"==i.fx?{top:h}:{width:0}:"tileSlide"==i.fx?{left:m}:{height:0};var S=e('<div class="cycle-tiles-container"></div>');S.css({zIndex:f.css("z-index"),overflow:"visible",position:"absolute",top:0,left:0,direction:"ltr"}),S.insertBefore(n);for(var x=0;y>x;x++)r=e("<div></div>").css(A).css({width:y-1===x?d:c,height:y-1===x?u:a,marginLeft:g?x*c:0,marginTop:g?0:x*a}).append(f.clone().css({position:"relative",maxWidth:"none",width:f.width(),margin:0,padding:0,marginLeft:g?-(x*c):0,marginTop:g?0:-(x*a)})),p=p.add(r);S.append(p),f.css("visibility","hidden"),v.css({opacity:1,display:"block",visibility:"visible"}),l(s?0:y-1),i._tileAniCallback=function(){v.css({display:"block",visibility:"visible"}),f.css("visibility","hidden"),S.remove(),o()}},stopTransition:function(e){e.container.find("*").stop(!0,!0),e._tileAniCallback&&e._tileAniCallback()},onDestroy:function(){var e=this.opts();e.container.find(".cycle-tiles-container").remove()}}})(jQuery);